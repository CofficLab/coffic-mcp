---
title: '任务状态'
description: '查询图像编辑任务的执行状态和结果'
folder: false
order: 3
---

# 任务状态

import { CodeExample } from '@coffic/cosy-ui';

`imageedit_status` 工具用于查询图像编辑任务的执行状态，获取任务进度和最终结果。

## 🚀 使用方法

```typescript
// 查询任务状态
imageedit_status({
  taskId: "task_1234567890"
})
```

## 📋 参数说明

| 参数 | 类型 | 必需 | 描述 |
|------|------|------|------|
| `taskId` | string | ✅ | 图像编辑任务的任务ID |
| `dashScopeApiKey` | string | ❌ | DashScope API密钥 |

## 🔄 任务状态类型

### 1. 等待中 (`PENDING`)
任务已提交，正在等待执行。

### 2. 执行中 (`RUNNING`)
任务正在执行中，请耐心等待。

### 3. 成功 (`SUCCEEDED`)
任务执行成功，可以获取生成的图片。

### 4. 失败 (`FAILED`)
任务执行失败，可以查看错误信息。

### 5. 已取消 (`CANCELLED`)
任务已被取消。

## 📊 返回结果示例

### 成功状态
```json
{
  "status": "SUCCEEDED",
  "taskId": "task_1234567890",
  "result": {
    "images": [
      "https://example.com/generated_image_1.jpg",
      "https://example.com/generated_image_2.jpg"
    ]
  }
}
```

### 失败状态
```json
{
  "status": "FAILED",
  "taskId": "task_1234567890",
  "error": "图片处理失败：不支持的文件格式"
}
```

## ⏱️ 执行时间

- **简单编辑任务**: 通常需要10-15秒
- **复杂编辑任务**: 可能需要30秒到1分钟
- **批量生成任务**: 时间与生成数量成正比

## 💡 使用建议

1. **定期查询状态** - 建议每10-15秒查询一次状态
2. **处理失败情况** - 如果任务失败，可以重新提交
3. **保存任务ID** - 任务ID是查询状态的唯一标识
4. **异步处理** - 任务执行是异步的，不会阻塞其他操作

## 🔧 技术特点

- 基于DashScope API的任务状态查询
- 支持实时状态更新
- 提供详细的错误信息
- 集成到MCP系统中，支持类型安全

## 📖 相关工具

- **[图像编辑](./create.mdx)** - 提交编辑任务
- **[模型查询](./models.mdx)** - 查询支持的模型

## ⚠️ 注意事项

- 任务ID在任务提交后立即获得
- 任务状态查询不会影响任务执行
- 失败的任务不会自动重试
- 成功的任务结果会保留一段时间
