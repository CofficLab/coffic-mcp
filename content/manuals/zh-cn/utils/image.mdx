---
title: '图像编辑工具'
description: '基于DashScope API的图像编辑工具集，支持11种不同的编辑功能'
folder: false
order: 1
---

# {frontmatter.title}

import { CodeExample } from '@coffic/cosy-ui';

基于DashScope API的图像编辑工具集，支持11种不同的编辑功能，包括风格化、图像修复、超分、上色、线稿生图等。

## 🚀 支持的功能类型

### 1. 整体风格化 (`stylization_all`)
将整张图片转换为指定风格。

```typescript
imageedit({
  imageUrl: "https://example.com/image.jpg",
  prompt: "转换成法国绘本风格",
  function: "stylization_all"
})
```

### 2. 局部风格化 (`stylization_local`)
将图片的特定部分转换为指定风格，无需蒙版。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/stylization_local_1.png",
  prompt: "把房子变成木板风格。",
  function: "stylization_local"
})
```

### 3. 指令编辑 (`description_edit`)
根据文字描述修改图片中的特定内容，无需蒙版。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/description_edit_2.png",
  prompt: "把女孩的头发修改为红色。",
  function: "description_edit"
})
```

### 4. 局部重绘 (`description_edit_with_mask`)
根据文字描述和蒙版指定区域进行精确重绘。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/description_edit_with_mask_3.jpeg",
  prompt: "陶瓷兔子拿着陶瓷小花。",
  function: "description_edit_with_mask",
  maskUrl: "http://wanx.alicdn.com/material/20250318/description_edit_with_mask_3_mask.png"
})
```

### 5. 去文字水印 (`remove_watermark`)
去除图片中的水印和文字。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/remove_watermark_1.png",
  prompt: "去除图像中的文字",
  function: "remove_watermark"
})
```

### 6. 图像修复 (`inpainting`)
修复图片中的缺陷，需要提供蒙版。

```typescript
imageedit({
  imageUrl: "https://example.com/damaged_image.jpg",
  prompt: "修复图片中的划痕和污渍",
  function: "inpainting",
  maskUrl: "https://example.com/damage_mask.jpg"
})
```

### 7. 扩图 (`expand`)
向四个方向扩展图片，支持自定义缩放比例。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/expand_2.jpg",
  prompt: "一位绿色仙子",
  function: "expand",
  topScale: 1.5,
  bottomScale: 1.5,
  leftScale: 1.5,
  rightScale: 1.5
})
```

### 8. 图像超分 (`super_resolution`)
提高图片分辨率，支持自定义放大倍数。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/super_resolution_1.jpeg",
  prompt: "图像超分。",
  function: "super_resolution",
  upscaleFactor: 2
})
```

### 9. 图像上色 (`colorization`)
为黑白图片添加颜色，根据提示词描述上色。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/colorization_1.jpeg",
  prompt: "蓝色背景，黄色的叶子。",
  function: "colorization"
})
```

### 10. 线稿生图 (`doodle`)
将线稿或涂鸦转换为完整的图片。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/doodle_1.png",
  prompt: "北欧极简风格的客厅。",
  function: "doodle"
})
```

### 11. 卡通形象控制 (`control_cartoon_feature`)
支持参考卡通形象生成图像。

```typescript
imageedit({
  imageUrl: "http://wanx.alicdn.com/material/20250318/control_cartoon_feature_1.png",
  prompt: "卡通形象小心翼翼地探出头，窥视着房间内一颗璀璨的蓝色宝石。",
  function: "control_cartoon_feature"
})
```

## 📋 参数说明

| 参数 | 类型 | 必需 | 描述 |
|------|------|------|------|
| `imageUrl` | string | ✅ | 需要编辑的图片URL |
| `prompt` | string | ✅ | 编辑指令描述，最多800个字符 |
| `function` | enum | ❌ | 编辑功能类型，默认为"stylization_all" |
| `maskUrl` | string | ❌ | 蒙版图片URL，用于指定编辑区域 |
| `n` | number | ❌ | 生成图片数量，默认1 |
| `topScale` | number | ❌ | 向上扩展的缩放比例，扩图功能使用，默认1.5 |
| `bottomScale` | number | ❌ | 向下扩展的缩放比例，扩图功能使用，默认1.5 |
| `leftScale` | number | ❌ | 向左扩展的缩放比例，扩图功能使用，默认1.5 |
| `rightScale` | number | ❌ | 向右扩展的缩放比例，扩图功能使用，默认1.5 |
| `upscaleFactor` | number | ❌ | 图像超分的放大倍数，超分功能使用，默认2 |
| `model` | string | ❌ | 使用的图像编辑模型 |
| `dashScopeApiKey` | string | ❌ | DashScope API密钥 |

## 🔍 蒙版需求说明

- **需要蒙版**：`description_edit_with_mask`、`inpainting`
- **可选蒙版**：`stylization_partial`（某些情况）
- **无需蒙版**：`stylization_all`、`stylization_local`、`description_edit`、`remove_watermark`、`expand`、`super_resolution`、`colorization`、`doodle`、`control_cartoon_feature`

## 📖 使用流程

1. **提交编辑任务**：使用 `imageedit` 工具
2. **获得任务ID**：API返回任务标识
3. **等待执行**：通常需要15秒左右
4. **查询状态**：使用 `imageedit_status` 工具
5. **获取结果**：任务完成后获得生成的图片URL

## 🛠️ 可用工具

- **`imageedit`** - 主要的图像编辑工具
- **`imageedit_models`** - 查询支持的模型
- **`imageedit_status`** - 查询任务状态

## ⚠️ 注意事项

- 图片URL需要是可访问的公开链接
- 蒙版图片用于指定编辑区域，某些功能类型必需
- 任务执行是异步的，需要等待并查询状态
- 支持批量生成多张图片（通过n参数）
- 扩图功能支持向四个方向自定义扩展比例
- 图像超分功能支持自定义放大倍数，提高图片分辨率
- 图像上色功能专门用于为黑白图片添加颜色
- 去文字水印功能专门用于去除水印和文字内容
- 局部重绘功能提供最精确的区域控制

## 🔧 技术实现

所有功能都基于DashScope API实现，支持异步任务处理，确保长时间运行的编辑任务能够正常完成。工具集完全集成到MCP系统中，支持类型安全的参数验证和错误处理。
