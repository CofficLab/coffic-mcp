---
title: '文生图工具'
description: '基于DashScope API的文本转图像工具，支持多种模型和参数配置'
folder: false
order: 2
---

# {frontmatter.title}

import { CodeExample } from '@coffic/cosy-ui';

基于DashScope API的文本转图像工具，支持多种模型和参数配置，能够根据文字描述生成高质量的图片。

## 🚀 主要功能

### 文本转图像 (`text2image`)
根据提供的文字描述生成图片，支持自定义尺寸、数量和模型选择。

```typescript
text2image({
  prompt: "一只可爱的小猫坐在花园里，阳光明媚，花朵盛开",
  size: "1024*1024",
  n: 1,
  model: "wan2.2-t2i-plus"
})
```

### 模型查询 (`text2image_models`)
查询支持的文生图模型，了解各模型的特点和推荐程度。

```typescript
text2image_models({})
```

### 任务状态查询 (`text2image_status`)
查询文生图任务的执行状态，获取生成的图片结果。

```typescript
text2image_status({
  task_id: "your_task_id_here"
})
```

## 📋 参数说明

### text2image 工具参数

| 参数 | 类型 | 必需 | 描述 |
|------|------|------|------|
| `prompt` | string | ✅ | 文字描述，最多800个字符 |
| `size` | string | ❌ | 图像尺寸，默认1024*1024，支持[512, 1440]像素范围 |
| `n` | number | ❌ | 生成图片数量，默认1 |
| `model` | string | ❌ | 使用的模型，默认wan2.2-t2i-plus |
| `dashScopeApiKey` | string | ❌ | DashScope API密钥 |

### text2image_status 工具参数

| 参数 | 类型 | 必需 | 描述 |
|------|------|------|------|
| `task_id` | string | ✅ | 任务ID |
| `dashScopeApiKey` | string | ❌ | DashScope API密钥 |

## 🎨 支持的模型

### 通义万相文生图2.2 (最新版本)

#### wan2.2-t2i-flash (极速版) ⭐ 推荐
- **描述**: 万相2.2极速版，当前最新模型。在创意性、稳定性、写实质感上全面升级，生成速度快，性价比高。
- **适用场景**: 快速生成、批量生产、成本敏感的场景

#### wan2.2-t2i-plus (专业版) ⭐ 推荐
- **描述**: 万相2.2专业版，当前最新模型。在创意性、稳定性、写实质感上全面升级，生成细节丰富。
- **适用场景**: 高质量要求、细节丰富的创作场景

### 通义万相文生图2.1

#### wanx2.1-t2i-turbo (极速版)
- **描述**: 万相2.1极速版。生成速度快，效果均衡。
- **适用场景**: 需要快速生成且效果要求不高的场景

#### wanx2.1-t2i-plus (专业版)
- **描述**: 万相2.1专业版。生成图像细节更丰富，速度稍慢。
- **适用场景**: 对图像质量有较高要求的场景

### 通义万相文生图2.0

#### wanx2.0-t2i-turbo (极速版)
- **描述**: 万相2.0极速版。擅长质感人像与创意设计，性价比高。
- **适用场景**: 人像生成、创意设计、预算有限的场景

## 📖 使用流程

1. **提交生成任务**: 使用 `text2image` 工具
2. **获得任务ID**: API返回任务标识
3. **等待执行**: 通常需要15秒左右
4. **查询状态**: 使用 `text2image_status` 工具
5. **获取结果**: 任务完成后获得生成的图片URL

## 🔧 技术特性

### 图像尺寸支持
- **像素范围**: [512, 1440]
- **最大分辨率**: 200万像素
- **常用尺寸**: 1024*1024, 1024*768, 768*1024
- **自定义组合**: 支持任意宽高组合

### 随机种子控制
- **种子范围**: [0, 2147483647]
- **稳定性**: 使用相同种子可生成相对稳定的内容
- **批量生成**: 支持为多张图片生成递增种子

### 异步任务处理
- **非阻塞**: 支持长时间运行的生成任务
- **状态查询**: 实时查询任务执行进度
- **错误处理**: 完善的错误处理和状态反馈

## 💡 使用技巧

### 提示词优化
```typescript
// 基础描述
text2image({
  prompt: "一只猫"
})

// 详细描述（推荐）
text2image({
  prompt: "一只橘色的猫咪坐在窗台上，阳光透过窗户洒在它身上，背景是温馨的客厅，风格写实，高清画质"
})

// 艺术风格描述
text2image({
  prompt: "梦幻般的森林场景，童话风格，柔和的色彩，充满魔法元素"
})
```

### 模型选择建议
```typescript
// 快速生成，成本优先
text2image({
  prompt: "简单的风景画",
  model: "wan2.2-t2i-flash"
})

// 高质量要求，细节优先
text2image({
  prompt: "精细的人物肖像",
  model: "wan2.2-t2i-plus"
})
```

### 批量生成
```typescript
// 生成多张图片
text2image({
  prompt: "不同角度的城市夜景",
  n: 4,
  size: "1024*768"
})
```

## ⚠️ 注意事项

- **API密钥**: 需要有效的DashScope API密钥
- **任务异步**: 所有生成任务都是异步执行，需要等待并查询状态
- **尺寸限制**: 图像尺寸必须在[512, 1440]像素范围内
- **字符限制**: 提示词最多800个字符
- **模型选择**: 推荐使用2.2版本模型获得最佳效果
- **成本控制**: 极速版模型性价比更高，适合批量生成

## 🔍 错误处理

工具包含完善的错误处理机制：

- **API密钥错误**: 提示缺少或无效的API密钥
- **网络错误**: 处理网络请求失败的情况
- **API错误**: 处理DashScope API返回的错误信息
- **任务状态**: 实时反馈任务执行状态

## 🚀 性能优化

- **模型选择**: 根据需求选择合适的模型（极速版vs专业版）
- **批量生成**: 一次提交多个生成任务提高效率
- **种子复用**: 使用相同种子生成相似风格的内容
- **尺寸优化**: 选择合适的图像尺寸平衡质量和速度
